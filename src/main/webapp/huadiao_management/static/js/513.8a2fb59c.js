"use strict";(self["webpackChunkhuadiao_management"]=self["webpackChunkhuadiao_management"]||[]).push([[513],{9513:function(s,e,t){t.r(e),t.d(e,{default:function(){return F}});var i=function(){var s=this,e=s._self._c;return e("div",{staticClass:"manage-content-container"},[e("div",{staticClass:"system-announcement-container"},[e("system-message-window"),e("div",{staticClass:"system-announcement-enter-origin"},[e("div",{staticClass:"enter-origin-header"},[e("div",{staticClass:"enter-origin-title"},[s._v("消息输入窗口")]),e("div",{staticClass:"message-settings",on:{click:s.clickMessageSettingsVisible}},[e("div",{staticClass:"message-settings-line"}),e("div",{staticClass:"message-settings-line"}),e("div",{staticClass:"message-settings-line"})]),e("div",{staticClass:"message-settings-board"},[e("div",{staticClass:"send-mode"},[e("div",{staticClass:"send-mode-title"},[s._v("发送消息的模式")]),e("div",{staticClass:"send-mode-options"},[e("div",{staticClass:"public-send-mode",attrs:{title:s.tips.systemMessageSendModeTip},on:{click:s.clickToChangeSendMode}},[e("div",{staticClass:"send-mode-sign"}),e("div",{staticClass:"public-mode-text"},[s._v("公开")])]),e("div",{staticClass:"private-send-mode",attrs:{title:s.tips.systemMessageSendModeTip},on:{click:s.clickToChangeSendMode}},[e("div",{staticClass:"send-mode-sign"}),e("div",{staticClass:"private-mode-text"},[s._v("私密")])])])])])]),e("div",{staticClass:"enter-origin-body"},[e("transition",{attrs:{name:"down",appear:""}},[e(s.sendModeComponent,{tag:"component"})],1),e("system-message-input")],1)])],1)])},a=[],n=t(9755),d=t.n(n),o=t(3280),c=t.n(o),l=function(){var s=this,e=s._self._c;return e("div",{staticClass:"public-enter-origin-body"},[e("div",{staticClass:"public-middle-container"},[s._m(0),e("div",{staticClass:"public-message-title-container"},[e("div",{staticClass:"public-message-title-title"},[s._v("系统消息标题")]),e("input",{staticClass:"public-message-title-input",attrs:{type:"text",placeholder:s.tips.systemMessageTitleTip}})])]),s._m(1)])},r=[function(){var s=this,e=s._self._c;return e("div",{staticClass:"current-send-mode-container"},[e("div",{staticClass:"current-send-mode-title"},[s._v("当前发送模式")]),e("div",{staticClass:"current-send-mode"},[s._v("公开")])])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"waring-container"},[e("div",{staticClass:"warning-title"},[s._v("注意事项")]),e("div",{staticClass:"waring-text"},[e("p",[s._v("1. 当前是花凋官方后台管理页面公开消息发送窗口。")]),e("p",[s._v("2. 公开模式下发送的消息会被所有用户接收到, 在发送之前请确保消息的准确性、官方性。")]),e("p",[s._v("3. 严禁擅自发送导致误导用户的非官方消息。")])])])}],m={name:"PublicSendElement",data(){return{tips:c()}},mounted(){this.$bus.$on("handleSystemMessage",this.getSystemMessageTitle)},methods:{getSystemMessageTitle(s){let e=d()(".public-message-title-input"),t=e.val();e.val(""),t&&""!==t?this.$bus.$emit("sendSystemMessage",t,s):this.$bus.$emit("addWarningTip","请输入系统标题","warning")}},beforeDestroy(){this.$bus.$off("handleSystemMessage")}},u=m,g=t(1001),p=(0,g.Z)(u,l,r,!1,null,"19350c86",null),v=p.exports,h=function(){var s=this,e=s._self._c;return e("div",{staticClass:"private-enter-origin-body"},[e("div",{staticClass:"user-search-container"},[e("div",{staticClass:"user-search-title"},[s._v("搜索用户")]),e("div",{staticClass:"user-search-input-container"},[e("input",{staticClass:"user-search-input",attrs:{type:"text",placeholder:s.tips.searchUsersTip}}),e("svg",{staticClass:"icon user-search-icon",attrs:{t:"1670373447066",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4635"}},[e("path",{attrs:{d:"M465.454545 868.848485C226.521212 868.848485 31.030303 673.357576 31.030303 434.424242S226.521212 0 465.454545 0s434.424242 195.490909 434.424243 434.424242-195.490909 434.424242-434.424243 434.424243z m0-806.787879C260.654545 62.060606 93.090909 229.624242 93.090909 434.424242s167.563636 372.363636 372.363636 372.363637 372.363636-167.563636 372.363637-372.363637S670.254545 62.060606 465.454545 62.060606z","p-id":"4636"}}),e("path",{attrs:{d:"M766.448485 806.787879c6.206061-6.206061 15.515152-6.206061 21.721212 0l183.078788 167.563636c6.206061 6.206061 6.206061 15.515152 0 21.721212-6.206061 6.206061-15.515152 6.206061-21.721212 0l-183.078788-167.563636c-6.206061-6.206061-6.206061-15.515152 0-21.721212z","p-id":"4637"}}),e("path",{attrs:{d:"M961.939394 1014.690909c-6.206061 0-15.515152-3.10303-21.721212-9.309091L757.139394 837.818182c-6.206061-6.206061-9.309091-12.412121-9.309091-21.721212 0-9.309091 3.10303-15.515152 9.309091-21.721212 6.206061-6.206061 12.412121-9.309091 21.721212-9.309091 9.309091 0 15.515152 3.10303 21.721212 9.309091l183.078788 167.563636c6.206061 6.206061 9.309091 12.412121 9.309091 21.721212 0 9.309091-3.10303 15.515152-9.309091 21.721212-6.206061 3.10303-12.412121 9.309091-21.721212 9.309091z m-186.181818-198.593939l183.078788 167.563636-192.387879-176.872727 9.309091 9.309091z","p-id":"4638"}})])])]),s._m(0),s._m(1)])},f=[function(){var s=this,e=s._self._c;return e("div",{staticClass:"private-middle-container"},[e("div",{staticClass:"current-chat-user-container"},[e("div",{staticClass:"current-chat-user-title"},[s._v("当前私信用户")]),e("div",{staticClass:"chat-user-info"},[e("div",{staticClass:"user-avatar-container"},[e("a",{staticClass:"personal-center",attrs:{href:"javascript:void(0);"}},[e("div",{staticClass:"user-avatar"})])]),e("div",{staticClass:"user-nickname"},[s._v("请指定一名用户")])])]),e("div",{staticClass:"current-send-mode-container"},[e("div",{staticClass:"current-send-mode-title"},[s._v("当前发送模式")]),e("div",{staticClass:"current-send-mode"},[s._v("私密")])])])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"waring-container"},[e("div",{staticClass:"warning-title"},[s._v("注意事项")]),e("div",{staticClass:"waring-text"},[e("p",[s._v("1. 当前是花凋官方后台管理页面私密消息发送窗口。")]),e("p",[s._v("2. 私密模式下发送的消息只会被特定用户接收到, 在发送之前请确保消息的准确性、官方性。")]),e("p",[s._v("3. 严禁擅自发送导致误导用户的非官方消息。")])])])}],C={name:"PrivateSendElement",data(){return{tips:c()}},mounted(){this.$bus.$on("handleSystemMessage",this.aaa)},methods:{aaa(){}},beforeDestroy(){this.$bus.$off("handleSystemMessage")}},M=C,y=(0,g.Z)(M,h,f,!1,null,"49e6f123",null),S=y.exports,_=function(){var s=this,e=s._self._c;return e("div",{staticClass:"system-announcement-window"},[e("div",{staticClass:"window-title"},[s._v("系统消息窗口")]),e("div",{staticClass:"system-message-container",on:{wheel:s.scrollAutoShow}},[s._l(s.publicInfo.systemMessages,(function(t){return e("div",{key:t.message_title,staticClass:"authority-message-container message-container"},[e("div",{staticClass:"message-text authority",on:{contextmenu:s.showContextMenu}},[e("div",{staticClass:"system-message-title"},[s._v(s._s(t.message_title))]),e("div",{staticClass:"system-message-content"},[s._v(s._s(t.message_content))])]),s._m(0,!0)])})),s._m(1)],2),s._m(2)])},b=[function(){var s=this,e=s._self._c;return e("div",{staticClass:"authority-avatar-container"},[e("img",{staticClass:"authority-logo",attrs:{src:"/img/authority.png"}})])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"user-message-container message-container"},[e("a",{attrs:{href:"javascript:void(0);"}},[e("div",{staticClass:"user-avatar-container"})]),e("div",{staticClass:"message-text user"},[s._v("你好啊!")])])},function(){var s=this,e=s._self._c;return e("div",{staticClass:"contextmenu"},[e("div",{staticClass:"contextmenu-remove"},[s._v("删除")])])}],w=(t(7658),t(7640)),x=t.n(w),T=t(7126),$={name:"SystemMessageWindow",data(){return{timer:new T.Timer,formData:null,sendMode:"public",publicInfo:{messageId:void 0,systemMessages:[]},privateInfo:{}}},beforeMount(){this.initSystemMessages()},mounted(){d()(document).click(this.hideContextMenu),this.$bus.$on("sendSystemMessage",this.sendSystemMessage),this.$bus.$on("modifySendMode",this.modifySendMode)},methods:{modifySendMode(){},scrollAutoShow(){d()(".system-message-container").css("overflow-y","auto"),this.timer.timeout((function(){d()(".system-message-container").css("overflow-y","hidden")}),1500)},showContextMenu(s){s.preventDefault();let e=s.pageX+"px",t=s.pageY+"px";d()(".contextmenu").css({top:t,left:e}).fadeIn(300),this.deleteSystemMessage(s)},deleteSystemMessage(s){d()(".contextmenu-remove").off("click").click((()=>{let e=confirm("确认删除吗？");e&&(this.formData=new FormData,this.formData.append("systemMessageId",this.publicInfo.messageId--),this.formData.append("deleteSystemMessage",""),this.sendRequest(x().SERVLETS.SYSTEM_MESSAGE_SERVLET,(e=>{let t,i,a=e.data;"deleteSystemMessageSucceed"===a?(t="系统消息删除成功",i="finished",d()(s.target).parents(".message-container").remove()):(t="系统消息删除失败",i="fail"),this.$bus.$emit("addWarningTip",t,i)})))}))},hideContextMenu(){d()(".contextmenu>div").off("click"),d()(".contextmenu").fadeOut(300)},initSystemMessages(){this.formData=new FormData,this.formData.append("getSystemMessages",""),this.sendRequest(x().SERVLETS.SYSTEM_MESSAGE_SERVLET,(s=>{let e=s.data;console.log(e),"object"===typeof e?(0===e.length?this.publicInfo.messageId=1:this.publicInfo.messageId=e[e.length-1].message_id,this.publicInfo.systemMessages=e):this.$bus.$emit("addWaningTip","系统消息获取失败","fail")}))},sendSystemMessage(s,e){let t,i;this.formData=new FormData,this.formData.append("systemMessageTitle",s),this.formData.append("systemMessageContent",e),this.formData.append("systemMessageFinished",""),this.sendRequest(x().SERVLETS.SYSTEM_MESSAGE_SERVLET,(a=>{"systemMessageSendSucceed"===a.data?(this.publicInfo.messageId++,this.publicInfo.systemMessages.push({message_id:this.publicInfo.messageId,message_title:s,message_content:e}),t="系统消息发送成功",i="finished"):(t="系统消息发送失败",i="fail"),this.$bus.$emit("addWarningTip",t,i)}))},sendRequest(s,e){this.$bus.$emit("sendRequest",s,e,this.formData)}},beforeDestroy(){this.$bus.$off(["sendSystemMessage","modifySendMode"]),d()(".system-message-container").off("mousewheel"),d()(".message-text").off("contextmenu")}},E=$,k=(0,g.Z)(E,_,b,!1,null,null,null),I=k.exports,D=function(){var s=this,e=s._self._c;return e("div",{staticClass:"system-message-input-container"},[e("div",{staticClass:"message-input-header"},[e("div",{staticClass:"message-tools"},[e("div",{staticClass:"smile-tool message-tool",attrs:{title:s.tips.systemMessageSmileTip}},[e("svg",{staticClass:"icon",attrs:{t:"1671009949433",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4695"}},[e("path",{attrs:{d:"M949.88112387 808.11842067L949.9556383 808.11842067 949.9556383 807.6700889Z","p-id":"4696"}}),e("path",{attrs:{d:"M870.35263082 153.64799056c-197.58863216-197.62340628-519.11414397-197.62340628-716.70277735 0-197.62340628 197.58739061-197.62340628 519.11414397 0 716.70153458 197.58863216 197.62464783 519.11538673 197.62464783 716.70277735 0C1067.97603589 672.76089298 1067.97603589 351.23538117 870.35263082 153.64799056M818.91873163 818.95164283c-169.23447691 169.23323536-444.63776048 169.19721969-613.85236663 0-169.25186458-169.26925104-169.25186458-444.61913125 0-613.88714075 169.21460614-169.21584891 444.61913125-169.25310612 613.85236663 0C988.15072544 374.27910823 988.15072544 649.71840748 818.91873163 818.95164283","p-id":"4697"}}),e("path",{attrs:{d:"M353.89369973 458.62623156c30.07793289 0 54.5573134-24.47813898 54.55731341-54.57345832 0-30.13257657-24.47938051-54.64673121-54.55731341-54.6467312-30.14996423 0-54.62934475 24.51415465-54.62934474 54.6467312C299.26435499 434.14809137 323.7437355 458.62623156 353.89369973 458.62623156","p-id":"4698"}}),e("path",{attrs:{d:"M668.17015566 458.71564937c30.1127058 0 54.62561891-24.53154111 54.6256189-54.6281032 0-30.13133502-24.5129131-54.60947399-54.6256189-54.609474-30.08041597 0-54.5573134 24.47813898-54.55731341 54.609474C613.61284103 434.18410704 638.08973846 458.71564937 668.17015566 458.71564937","p-id":"4699"}}),e("path",{attrs:{d:"M670.0702846 641.9291177l-2.97811119 0.96869368c-48.92150503 22.14706471-101.39736959 33.41619958-155.8441529 33.41619959-56.24383382 0-109.43752511-11.37842222-158.14293731-33.73785513l-2.94333827-0.90038818c-1.8305819-0.50173391-4.30696038-1.21831788-7.39436013-1.21831788-17.9096526 0-32.44626435 14.53661177-32.44626435 32.374233 0 8.46985808 3.98406209 16.97697458 10.55254967 23.36662537l-0.39492842 1.97216028 8.29102246 3.73319513c58.14644705 26.31120517 121.38847103 40.16600588 182.87194324 40.16600587 62.6334858 0 124.008911-13.49588673 183.23209877-40.48890417 10.40724545-5.70783971 16.9037017-16.65283474 16.90370169-28.53423241C711.77750665 652.12399616 692.86438745 634.92968721 670.0702846 641.9291177","p-id":"4700"}})])]),e("div",{staticClass:"img-tool message-tool",attrs:{title:s.tips.systemMessageImgTip}},[e("svg",{staticClass:"icon",attrs:{t:"1671009980831",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4843"}},[e("path",{attrs:{d:"M1029.81530905 562.87535408V822.68918518c0 78.6432-63.75600947 142.39920947-142.39921069 142.39920948H136.58390164c-78.6432 0-142.39920947-63.75600947-142.39921069-142.39920948V201.31081482c0-78.6432 63.75600947-142.39920947 142.39921069-142.39920948h750.83219672c78.6432 0 142.39920947 63.75600947 142.39921069 142.39920948v361.56453926z m-77.6722963-90.56589749V201.31081482a64.72691317 64.72691317 0 0 0-64.72691439-64.72691318H136.58390164a64.72691317 64.72691317 0 0 0-64.72691439 64.72691318v418.07113481A352.06262875 352.06262875 0 0 1 123.63851852 615.56306132a348.16606815 348.16606815 0 0 1 222.45345659 79.91184832C408.87708089 531.88410785 566.50006164 421.38232059 745.01688889 421.38232059c79.74355794 0 154.12772622 20.36308741 207.12612386 50.927136z m0 99.80890074c-6.47269095-10.09739852-25.64480356-26.27912651-52.97250607-39.94945065C857.60288237 511.37862163 804.53975822 499.05461689 745.01688889 499.05461689c-147.78448949 0-278.07976653 92.55948683-328.204288 229.00382105-3.31401838 9.03587673-8.98409601 24.66095408-16.98434253 46.82344888-9.32067555 25.85192889-41.81358577 34.11108386-62.34496235 15.84514843-19.94883436-17.76106549-34.65478994-30.42164978-43.85895704-37.80051793A270.50671764 270.50671764 0 0 0 123.63851852 693.23535762c-17.55393897 0-34.86191525 1.65700859-51.78153127 4.91924624V822.68918518a64.72691317 64.72691317 0 0 0 64.72691439 64.72691318h750.83219672a64.72691317 64.72691317 0 0 0 64.72691439-64.72691318V572.10541155zM278.98311111 473.16385185a116.50844445 116.50844445 0 1 1 0-233.01688888 116.50844445 116.50844445 0 0 1 0 233.01688888z m0-77.6722963a38.83614815 38.83614815 0 1 0 0-77.6722963 38.83614815 38.83614815 0 0 0 0 77.6722963z","p-id":"4844"}})])])]),e("div",{staticClass:"send-button",on:{click:s.sendSystemMessage}},[e("span",{staticClass:"send-button-text"},[s._v("发送")])])]),e("div",{staticClass:"system-message-input",attrs:{contenteditable:"true"}})])},V=[],R={name:"SystemMessageInput",data(){return{tips:c()}},methods:{sendSystemMessage(){let s=d()(".system-message-input"),e=s.html();e&&""!==e?(s.html(""),this.$bus.$emit("handleSystemMessage",e)):this.$bus.$emit("addWarningTip","系统消息不能为空!","warning")}},beforeDestroy(){d()(".send-button").off("click")}},z=R,A=(0,g.Z)(z,D,V,!1,null,"196ef1d3",null),L=A.exports,W={name:"systemAnnouncement",data(){return{isMessageSettingsClick:!1,sendModeComponent:"publicSendElement",tips:{systemMessageImgTip:c().systemMessageImgTip,searchUsersTip:c().searchUsersTip}}},components:{publicSendElement:v,privateSendElement:S,systemMessageWindow:I,systemMessageInput:L},mounted(){d()(".public-send-mode").find(".send-mode-sign").addClass("selected-send-mode")},methods:{clickMessageSettingsVisible(){const s=0,e=1,t=2;let i=d()(".system-announcement-enter-origin"),a=i.find(".message-settings-line"),n=i.find(".message-settings-board");if(this.isMessageSettingsClick){let i={transform:"rotate(0)"};d()(a[s]).css(i),d()(a[t]).css(i),d()(a[e]).css("opacity",1)}else d()(a[s]).css({transform:"rotate(-45deg)"}),d()(a[t]).css({transform:"rotate(45deg)"}),d()(a[e]).css("opacity",0);n.stop().slideToggle(300),this.isMessageSettingsClick=!this.isMessageSettingsClick},clickToChangeSendMode(){let s,e=d()(".public-send-mode"),t=d()(".private-send-mode");"publicSendElement"===this.sendModeComponent?(e.find(".send-mode-sign").removeClass("selected-send-mode"),t.find(".send-mode-sign").addClass("selected-send-mode"),this.sendModeComponent="privateSendElement",s="当前模式更换为私密模式"):(e.find(".send-mode-sign").addClass("selected-send-mode"),t.find(".send-mode-sign").removeClass("selected-send-mode"),this.sendModeComponent="publicSendElement",s="当前模式更换为公开模式"),this.$bus.$emit("addWarningTip",s,"warning")}},beforeDestroy(){d()(".public-send-mode").off("click"),d()(".private-send-mode").off("click")}},Z=W,q=(0,g.Z)(Z,i,a,!1,null,"72841988",null),F=q.exports}}]);
//# sourceMappingURL=513.8a2fb59c.js.map